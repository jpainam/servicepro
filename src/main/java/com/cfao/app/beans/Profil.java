package com.cfao.app.beans;

import javafx.beans.property.ListProperty;
import javafx.beans.property.SimpleIntegerProperty;
import javafx.beans.property.SimpleListProperty;
import javafx.beans.property.SimpleStringProperty;
import javafx.collections.FXCollections;

import javax.persistence.*;
import java.util.List;

/**
 * Profils generated by hbm2java
 */
@Entity
@Table(name = "profils"
)
public class Profil implements java.io.Serializable {


    private SimpleIntegerProperty idprofil = new SimpleIntegerProperty();
    private SimpleStringProperty abbreviation = new SimpleStringProperty();
    private SimpleStringProperty libelle = new SimpleStringProperty();
    private ListProperty<Competence> competences = new SimpleListProperty<>();
    private ListProperty<ProfilPersonne> profilPersonnes = new SimpleListProperty<>();

    public Profil() {
    }


    public Profil(String libelle) {
        this.libelle.set(libelle);
    }

    public Profil(String abbreviation, String libelle, List<Competence> competences, List<ProfilPersonne> profilPersonne) {
        this.abbreviation.set(abbreviation);
        this.libelle.set(libelle);
        this.competences.set(FXCollections.observableArrayList(competences));
        this.profilPersonnes.set(FXCollections.observableArrayList(profilPersonne));
    }

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)


    @Column(name = "IDPROFIL", unique = true, nullable = false)
    public Integer getIdprofil() {
        return this.idprofil.get();
    }

    public void setIdprofil(Integer idprofil) {
        this.idprofil.set(idprofil);
    }


    @Column(name = "ABBREVIATION", length = 50)
    public String getAbbreviation() {
        return this.abbreviation.get();
    }

    public void setAbbreviation(String abbreviation) {
        this.abbreviation.set(abbreviation);
    }


    @Column(name = "LIBELLE", nullable = false, length = 50)
    public String getLibelle() {
        return this.libelle.get();
    }

    public void setLibelle(String libelle) {
        this.libelle.set(libelle);
    }


    @OneToMany(fetch = FetchType.LAZY, mappedBy = "profil")
    public List<ProfilPersonne> getProfilPersonnes() {
        return this.profilPersonnes.get();
    }

    public void setProfilPersonnes(List<ProfilPersonne> profilPersonne) {
        if(profilPersonne != null) {
            this.profilPersonnes.set(FXCollections.observableArrayList(profilPersonne));
        }
    }


    public SimpleStringProperty libelleProperty() {
        return libelle;
    }


    @ManyToMany(fetch = FetchType.LAZY)
    @JoinTable(name = "profil_competence",  joinColumns = {
            @JoinColumn(name = "PROFIL", nullable = false, updatable = false)}, inverseJoinColumns = {
            @JoinColumn(name = "COMPETENCE", nullable = false, updatable = false)})
    public List<Competence> getCompetences() {
        return competences.get();
    }

    public ListProperty<Competence> competencesProperty() {
        return competences;
    }

    public void setCompetences(List<Competence> competences) {
        if(competences != null) {
            this.competences.set(FXCollections.observableArrayList(competences));
        }
    }

    @Override
    public String toString() {
        return getLibelle();
    }

    @Override
    public boolean equals(Object o) {
        if (this == o) return true;
        if (o == null || getClass() != o.getClass()) return false;

        Profil profil = (Profil) o;
        if(profil.getIdprofil().equals(this.getIdprofil())){
            return true;
        }
        return false;
    }

    @Override
    public int hashCode() {
        int result = idprofil != null ? idprofil.hashCode() : 0;
        result = 31 * result + (abbreviation != null ? abbreviation.hashCode() : 0);
        result = 31 * result + (libelle != null ? libelle.hashCode() : 0);

        return result;
    }

    public SimpleStringProperty abbreviationProperty() {
        return  abbreviation;
    }
}


